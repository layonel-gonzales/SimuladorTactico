/**
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * ğŸ¬ FLUJO DE EXPORTACIÃ“N DE VIDEO - DIAGRAMA VISUAL
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * 
 * Este archivo documenta visualmente cÃ³mo funciona el nuevo workflow
 */

/*
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚                        INICIO: Usuario clica "Exportar Video"            â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 *                            â”‚
 *                            â–¼
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚                    animationManager.exportToVideo()                      â”‚
 * â”‚                           (Nueva versiÃ³n)                               â”‚
 * â”‚                                                                          â”‚
 * â”‚  1. Valida que hay al menos 2 frames                                    â”‚
 * â”‚  2. Crea instancia VideoExportWorkflow                                  â”‚
 * â”‚  3. Llama startExportWorkflow()                                         â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 *                            â”‚
 *                            â–¼
 * â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
 * â•‘                                                                          â•‘
 * â•‘               ğŸ“¹ PASO 1: CAPTURAR ANIMACIÃ“N A VIDEO                     â•‘
 * â•‘                        (5-15 segundos)                                  â•‘
 * â•‘                                                                          â•‘
 * â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â•‘
 * â•‘  â”‚ Crear canvas de 1280x720                                       â”‚    â•‘
 * â•‘  â”‚ Iniciar MediaRecorder (30 FPS, VP9 codec)                      â”‚    â•‘
 * â•‘  â”‚                                                                â”‚    â•‘
 * â•‘  â”‚ Para cada Frame de la animaciÃ³n:                               â”‚    â•‘
 * â•‘  â”‚   1. Interpolar posiciones de jugadores                        â”‚    â•‘
 * â•‘  â”‚   2. Dibujar en canvas                                         â”‚    â•‘
 * â•‘  â”‚   3. Esperar a siguiente FPS                                   â”‚    â•‘
 * â•‘  â”‚   4. Mostrar progreso: "ğŸ“¹ Grabando... 45%"                    â”‚    â•‘
 * â•‘  â”‚                                                                â”‚    â•‘
 * â•‘  â”‚ Detener grabaciÃ³n â†’ VideoBlob (12-15 MB)                       â”‚    â•‘
 * â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â•‘
 * â•‘                                                                          â•‘
 * â•‘  âš¡ VENTAJA: Captura SOLO canvas, no interfieren modales              â•‘
 * â•‘                                                                          â•‘
 * â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 *                            â”‚
 *                            â–¼
 * â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
 * â•‘                                                                          â•‘
 * â•‘            ğŸ¤ PASO 2: GRABAR AUDIO SINCRONIZADO                         â•‘
 * â•‘                  (DuraciÃ³n automÃ¡tica calculada)                        â•‘
 * â•‘                                                                          â•‘
 * â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â•‘
 * â•‘  â”‚ Mostrar indicador: "ğŸ¤ Grabando audio..."                       â”‚    â•‘
 * â•‘  â”‚ Calcular duraciÃ³n: (frames - 1) Ã— (200ms Ã— 1.75 / speed)        â”‚    â•‘
 * â•‘  â”‚ Llamar audioManager.startRecording()                            â”‚    â•‘
 * â•‘  â”‚ Esperar duraciÃ³n exacta + 500ms buffer                          â”‚    â•‘
 * â•‘  â”‚ Llamar audioManager.stopRecording()                             â”‚    â•‘
 * â•‘  â”‚ Obtener AudioBlob (400-500 KB)                                  â”‚    â•‘
 * â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â•‘
 * â•‘                                                                          â•‘
 * â•‘  âœ¨ RESULTADO: Audio sincronizado con exact timing                    â•‘
 * â•‘                                                                          â•‘
 * â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 *                            â”‚
 *                            â–¼
 * â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
 * â•‘                                                                          â•‘
 * â•‘          âœ… PASO 3: VALIDACIÃ“N INTERACTIVA DE AUDIO                     â•‘
 * â•‘                 (Usuario decide: aceptar o re-grabar)                   â•‘
 * â•‘                                                                          â•‘
 * â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â•‘
 * â•‘  â”‚                  ğŸ¤ Validar Audio                               â”‚    â•‘
 * â•‘  â”‚                                                                â”‚    â•‘
 * â•‘  â”‚  Escucha el audio grabado. Â¿EstÃ¡ sincronizado?                â”‚    â•‘
 * â•‘  â”‚                                                                â”‚    â•‘
 * â•‘  â”‚  [â•â•â•â•â• Reproductor de Audio â•â•â•â•â•]                            â”‚    â•‘
 * â•‘  â”‚                                                                â”‚    â•‘
 * â•‘  â”‚         [ğŸ”„ Re-grabar]    [âœ… Confirmar]                       â”‚    â•‘
 * â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â•‘
 * â•‘                                                                          â•‘
 * â•‘  Usuario tiene 2 opciones:                                              â•‘
 * â•‘                                                                          â•‘
 * â•‘      OPCIÃ“N A: "âœ… Confirmar"  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â•‘
 * â•‘                                          â”‚                             â•‘
 * â•‘      OPCIÃ“N B: "ğŸ”„ Re-grabar" â”€â”€â”€â”€â”€â”€â”€â”   â”‚                             â•‘
 * â•‘                                    â”‚   â”‚                             â•‘
 * â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 *                                      â”‚   â”‚
 *             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
 *             â”‚                            â”‚
 *             â–¼                            â–¼ (Regresa a Paso 2)
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚ OPCIÃ“N A: Confirmar             â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 *                  â”‚
 *                  â–¼
 * â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
 * â•‘                                                                          â•‘
 * â•‘            ğŸï¸ PASO 4: PROCESAR Y DESCARGAR                              â•‘
 * â•‘              (Mezclar video + audio + descargar)                        â•‘
 * â•‘                                                                          â•‘
 * â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â•‘
 * â•‘  â”‚              ğŸ¬ Procesando video...                             â”‚    â•‘
 * â•‘  â”‚         [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘]                       â”‚    â•‘
 * â•‘  â”‚                                                                â”‚    â•‘
 * â•‘  â”‚ VideoBlob (12-15 MB)     +     AudioBlob (400-500 KB)          â”‚    â•‘
 * â•‘  â”‚         â”‚                              â”‚                       â”‚    â•‘
 * â•‘  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚    â•‘
 * â•‘  â”‚                        â–¼                                        â”‚    â•‘
 * â•‘  â”‚                 [FUTURO: FFmpeg.js]                             â”‚    â•‘
 * â•‘  â”‚              (Mezcla profesional)                               â”‚    â•‘
 * â•‘  â”‚                        â”‚                                        â”‚    â•‘
 * â•‘  â”‚                        â–¼                                        â”‚    â•‘
 * â•‘  â”‚           FinalBlob (13-15 MB)                                  â”‚    â•‘
 * â•‘  â”‚           animacion-tactica-TIMESTAMP.webm                      â”‚    â•‘
 * â•‘  â”‚                        â”‚                                        â”‚    â•‘
 * â•‘  â”‚                        â–¼                                        â”‚    â•‘
 * â•‘  â”‚              ğŸ“¥ DESCARGA AUTOMÃTICA                             â”‚    â•‘
 * â•‘  â”‚                                                                â”‚    â•‘
 * â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â•‘
 * â•‘                                                                          â•‘
 * â•‘  NOTA: Actualmente NO se mezcla audio (solo video)                      â•‘
 * â•‘        Pendiente integraciÃ³n con FFmpeg.js                             â•‘
 * â•‘                                                                          â•‘
 * â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 *                            â”‚
 *                            â–¼
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚                     âœ… EXPORTACIÃ“N COMPLETADA                           â”‚
 * â”‚                                                                          â”‚
 * â”‚  Usuario obtiene: animacion-tactica-TIMESTAMP.webm                     â”‚
 * â”‚                                                                          â”‚
 * â”‚  Video listo para:                                                      â”‚
 * â”‚  â€¢ Compartir en redes sociales (convertir a MP4 si es necesario)        â”‚
 * â”‚  â€¢ Descargar para archivo                                               â”‚
 * â”‚  â€¢ Enviar a colegas o jugadores                                         â”‚
 * â”‚  â€¢ Presentaciones tÃ¡cticas                                              â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 */

/*
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * ğŸ“Š DIAGRAMA DE COMPONENTES
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 */

/*
 *
 *  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 *  â”‚                         index.html                                   â”‚
 *  â”‚  â€¢ Carga videoExportWorkflow.js                                     â”‚
 *  â”‚  â€¢ BotÃ³n "Exportar Video" â†’ animationManager.exportToVideo()        â”‚
 *  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 *                             â”‚
 *           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 *           â–¼                 â–¼                 â–¼
 *  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 *  â”‚animationManager â”‚ â”‚audioManager  â”‚ â”‚videoExportWorkfloâ”‚
 *  â”‚                 â”‚ â”‚              â”‚ â”‚                  â”‚
 *  â”‚â€¢ frames[]       â”‚ â”‚â€¢ recordAudio â”‚ â”‚â€¢ startExport()   â”‚
 *  â”‚â€¢ speed          â”‚ â”‚â€¢ stopAudio   â”‚ â”‚â€¢ captureVideo()  â”‚
 *  â”‚â€¢ export()       â”‚ â”‚â€¢ audioBlob   â”‚ â”‚â€¢ recordAudio()   â”‚
 *  â”‚                 â”‚ â”‚â€¢ getAudioBlobâ”‚ â”‚â€¢ validateAudio() â”‚
 *  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â€¢ processVideo()  â”‚
 *           â”‚                           â”‚â€¢ downloadFile()  â”‚
 *           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
 *                           â”‚                             â”‚
 *                           â–¼                             â”‚
 *           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
 *           â”‚ drawingManager.js                         â”‚ â”‚
 *           â”‚ â€¢ captureFrameToCanvas()                  â”‚ â”‚
 *           â”‚ â€¢ drawBall(), drawPlayerCard()            â”‚ â”‚
 *           â”‚ â€¢ renderiza en canvas del workflow        â”‚ â”‚
 *           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
 *                           â”‚                             â”‚
 *                           â”‚                             â”‚
 *           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
 *           â”‚                 Browser APIs               â”‚ â”‚
 *           â”‚                                            â”‚ â”‚
 *           â”‚  â€¢ HTMLCanvasElement.captureStream()      â”‚ â”‚
 *           â”‚  â€¢ MediaRecorder API                       â”‚ â”‚
 *           â”‚  â€¢ getUserMedia (micrÃ³fono)                â”‚ â”‚
 *           â”‚  â€¢ Blob API (archivo)                      â”‚ â”‚
 *           â”‚                                            â”‚ â”‚
 *           â”‚  [Futuro]                                 â”‚ â”‚
 *           â”‚  â€¢ FFmpeg.js (muxing profesional)         â”‚ â”‚
 *           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
 *                                                           â–¼
 *                                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 *                                               â”‚ Archivo Descargado â”‚
 *                                               â”‚ .webm de alta      â”‚
 *                                               â”‚ calidad            â”‚
 *                                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 */

/*
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * ğŸ”„ CICLO DE ACTUALIZACIÃ“N - STATE MANAGEMENT
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 */

/*
 *
 *  startExportWorkflow()
 *  â”œâ”€â”€ this.isCapturing = true
 *  â”œâ”€â”€ this.videoBlob = null
 *  â”œâ”€â”€ this.audioBlob = null
 *  â”œâ”€â”€ this.frameCount = 0
 *  â”‚
 *  â””â”€â†’ captureAnimationToVideo()
 *      â”œâ”€â”€ Crear canvas 1280x720
 *      â”œâ”€â”€ Crear stream canvas.captureStream(30)
 *      â”œâ”€â”€ MediaRecorder(stream)
 *      â”œâ”€â”€ Para cada frame:
 *      â”‚   â”œâ”€â”€ interpolateFrame()
 *      â”‚   â”œâ”€â”€ animationManager.captureFrameToCanvas()
 *      â”‚   â”œâ”€â”€ updateMinimalProgress()
 *      â”‚   â””â”€â”€ await sleep(stepDuration)
 *      â”œâ”€â”€ mediaRecorder.stop()
 *      â”œâ”€â”€ this.videoBlob = new Blob(chunks)
 *      â””â”€â”€ hideMinimalProgressIndicator()
 *      â”‚
 *      â””â”€â†’ recordAudioSynchronized()
 *          â”œâ”€â”€ this.getAnimationDuration() â†’ ms
 *          â”œâ”€â”€ audioManager.startRecording()
 *          â”œâ”€â”€ showAudioRecordingIndicator()
 *          â”œâ”€â”€ setTimeout(duration + 500)
 *          â”œâ”€â”€ audioManager.stopRecording()
 *          â”œâ”€â”€ this.audioBlob = audioManager.getAudioBlob()
 *          â””â”€â”€ hideAudioRecordingIndicator()
 *          â”‚
 *          â””â”€â†’ validateAndConfirmAudio()
 *              â”œâ”€â”€ if (!audioBlob) â†’ resolve(true)
 *              â”œâ”€â”€ Modal con reproductor
 *              â”œâ”€â”€ Espera click: Confirmar / Re-grabar
 *              â”œâ”€â”€ if Re-grabar â†’ return false
 *              â””â”€â”€ if Confirmar â†’ return true
 *              â”‚
 *              â”œâ”€ FALSE? â†’ Regresa a recordAudioSynchronized()
 *              â””â”€ TRUE? â†’ ContinÃºa
 *              â”‚
 *              â””â”€â†’ processAndDownloadFinalVideo()
 *                  â”œâ”€â”€ if (!audioBlob) â†’ downloadFile(videoBlob)
 *                  â”œâ”€â”€ showProcessingModal()
 *                  â”œâ”€â”€ [Futuro] mixVideoWithAudioFFmpeg()
 *                  â”œâ”€â”€ downloadFile(finalBlob)
 *                  â””â”€â”€ hideProcessingModal()
 *
 */

/*
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * â±ï¸ TIMELINE DE EJECUCIÃ“N (Ejemplo de 10 segundos de animaciÃ³n)
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 */

/*
 *
 *  Tiempo Real â”‚ Evento                          â”‚ Estado
 *  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 *  0:00        â”‚ Usuario clica "Exportar"        â”‚ Validando...
 *  0:00        â”‚ Crear canvas                    â”‚ Canvas 1280x720 creado
 *  0:00        â”‚ startRecording()                â”‚ MediaRecorder iniciado
 *  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 *  0:01        â”‚ Renderizar frame 0              â”‚ ğŸ“¹ Grabando... 1%
 *  0:02        â”‚ Renderizar frame 1              â”‚ ğŸ“¹ Grabando... 2%
 *  0:03        â”‚ Renderizar frame 2              â”‚ ğŸ“¹ Grabando... 3%
 *  ...         â”‚ ...                             â”‚ ...
 *  0:15        â”‚ Renderizar frame 30             â”‚ ğŸ“¹ Grabando... 100%
 *  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 *  0:15        â”‚ mediaRecorder.stop()            â”‚ âœ… Video capturado
 *  0:15        â”‚ videoBlob listo (12 MB)         â”‚ Pasando a Paso 2
 *  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 *  0:15        â”‚ audioManager.startRecording()   â”‚ ğŸ¤ Grabando audio...
 *  0:15        â”‚ Esperar 10500ms (10s + 500ms)   â”‚ Contando...
 *  0:25.5      â”‚ audioManager.stopRecording()    â”‚ ğŸ¤ Audio completo
 *  0:25.5      â”‚ audioBlob listo (450 KB)        â”‚ Pasando a Paso 3
 *  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 *  0:25.5      â”‚ Modal validaciÃ³n aparece        â”‚ âœ… Validar Audio
 *  0:26        â”‚ Usuario escucha audio           â”‚ Reproduciendo...
 *  0:30        â”‚ Usuario clica "Confirmar"       â”‚ âœ… Audio confirmado
 *  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 *  0:30        â”‚ showProcessingModal()           â”‚ ğŸ¬ Procesando...
 *  0:31        â”‚ downloadFile(finalBlob)         â”‚ ğŸ“¥ Descargando...
 *  0:32        â”‚ Descarga completada             â”‚ âœ… Archivo guardado
 *
 */

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Diagrama escrito en ASCII art para referencia rÃ¡pida durante debugging
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
