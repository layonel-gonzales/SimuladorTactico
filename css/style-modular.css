/* ============================================
   üé® SIMULADOR T√ÅCTICO - ESTILOS MODULARES
   ============================================ */

/* === IMPORTACIONES EN ORDEN DE CASCADA === */

/* 1. Variables y fundamentos */
@import './modules/variables.css';
@import './modules/base.css';

/* 2. Utilidades fundamentales */
@import './modules/utilities.css';

/* 3. Componentes de la aplicaci√≥n */
@import './modules/field.css';
@import './modules/player-tokens.css';

/* 4. Interface de usuario */
@import './modules/components.css';
@import './modules/menus.css';
@import './modules/modals.css';

/* 5. Caracter√≠sticas PWA */
@import '../freemium-styles.css';
@import '../pwa-styles.css';

/* ============================================
   üì± RESPONSIVE DESIGN GLOBAL
   ============================================ */

/* === BREAKPOINTS PRINCIPALES === */
@media (max-width: 480px) {
    :root {
        --spacing-sm: 6px;
        --spacing-md: 12px;
        --spacing-lg: 18px;
        --player-token-width: clamp(45px, 15vw, 70px);
        --player-token-height: clamp(60px, 18vw, 95px);
        --button-height: 32px;
        --font-size-sm: 0.75rem;
    }
}

@media (min-width: 481px) and (max-width: 768px) {
    :root {
        --player-token-width: clamp(55px, 10vw, 85px);
        --player-token-height: clamp(75px, 13vw, 115px);
    }
}

@media (min-width: 769px) and (max-width: 1024px) {
    :root {
        --player-token-width: clamp(65px, 8vw, 95px);
        --player-token-height: clamp(85px, 11vw, 125px);
    }
}

@media (min-width: 1025px) {
    :root {
        --player-token-width: clamp(75px, 6vw, 110px);
        --player-token-height: clamp(95px, 9vw, 150px);
        --spacing-lg: 32px;
        --spacing-xl: 40px;
    }
}

/* ============================================
   üé≠ TEMAS Y PERSONALIZACIONES
   ============================================ */

/* === TEMA OSCURO (por defecto) === */
[data-theme="dark"] {
    --bg-primary: #1a1a1a;
    --bg-secondary: #2a2a2a;
    --bg-tertiary: #333333;
    --text-primary: #ffffff;
    --text-secondary: #cccccc;
}

/* === TEMA CLARO === */
[data-theme="light"] {
    --bg-primary: #ffffff;
    --bg-secondary: #f8f9fa;
    --bg-tertiary: #e9ecef;
    --text-primary: #333333;
    --text-secondary: #666666;
    --pitch-green-primary: #4a934a;
    --pitch-green-secondary: #3a803a;
}

/* === TEMA ALTO CONTRASTE === */
[data-theme="high-contrast"] {
    --bg-primary: #000000;
    --bg-secondary: #1a1a1a;
    --bg-tertiary: #333333;
    --text-primary: #ffffff;
    --text-secondary: #ffffff;
    --color-primary: #00ffff;
    --color-secondary: #ffff00;
    --color-success: #00ff00;
    --color-danger: #ff0000;
    --color-warning: #ffff00;
}

/* ============================================
   üöÄ OPTIMIZACIONES DE RENDIMIENTO
   ============================================ */

/* === WILL-CHANGE PARA ANIMACIONES === */
.player-token,
.modal,
.dropdown-menu,
#drawing-canvas {
    will-change: transform;
}

/* === CONTENIDO CR√çTICO === */
.critical-content {
    contain: layout;
}

/* === LAZY LOADING === */
.lazy-load {
    content-visibility: auto;
    contain-intrinsic-size: 0 200px;
}

/* ============================================
   üîß UTILIDADES ADICIONALES
   ============================================ */

/* === PRINT STYLES === */
@media print {
    .no-print {
        display: none !important;
    }
    
    .page-break {
        page-break-after: always;
    }
    
    .modal-overlay,
    #unified-single-bottom-menu,
    .sidebar {
        display: none !important;
    }
}

/* === REDUCED MOTION === */
@media (prefers-reduced-motion: reduce) {
    .player-token,
    .modal,
    .btn {
        transition: none !important;
        animation: none !important;
    }
}

/* === HIGH CONTRAST === */
@media (prefers-contrast: high) {
    :root {
        --shadow-sm: 0 0 0 1px #000;
        --shadow-md: 0 0 0 2px #000;
        --shadow-lg: 0 0 0 3px #000;
    }
    
    .btn,
    .form-control,
    .card {
        border-width: 2px;
    }
}

/* ============================================
   üìè MEDIDAS DE SEGURIDAD CSS
   ============================================ */

/* === PREVENCI√ìN DE DESBORDAMIENTO === */
* {
    max-width: 100%;
}

img, video, canvas, svg {
    height: auto;
}

/* === ACCESIBILIDAD === */
.sr-only {
    position: absolute !important;
    width: 1px !important;
    height: 1px !important;
    padding: 0 !important;
    margin: -1px !important;
    overflow: hidden !important;
    clip: rect(0, 0, 0, 0) !important;
    white-space: nowrap !important;
    border: 0 !important;
}

/* === SKIP LINKS === */
.skip-link {
    position: absolute;
    top: -40px;
    left: 6px;
    background: var(--color-primary);
    color: white;
    padding: 8px;
    text-decoration: none;
    border-radius: 4px;
    z-index: 100000;
}

.skip-link:focus {
    top: 6px;
}

/* ============================================
   üéØ COMPONENTES ESPEC√çFICOS LEGACY
   ============================================ */

/* === WATERMARK === */
.watermark {
    position: fixed;
    bottom: 10px;
    right: 10px;
    background: rgba(0, 0, 0, 0.7);
    color: white;
    padding: var(--spacing-xs) var(--spacing-sm);
    border-radius: var(--border-radius-sm);
    font-size: var(--font-size-xs);
    z-index: calc(var(--z-modal) + 1);
    pointer-events: none;
}

/* === TUTORIAL HIGHLIGHTS === */
.tutorial-highlight {
    position: relative;
    z-index: calc(var(--z-modal) + 10);
}

.tutorial-highlight::after {
    content: '';
    position: absolute;
    top: -4px;
    left: -4px;
    right: -4px;
    bottom: -4px;
    border: 2px solid var(--color-primary);
    border-radius: var(--border-radius-md);
    pointer-events: none;
    animation: tutorialPulse 2s infinite;
}

@keyframes tutorialPulse {
    0%, 100% {
        border-color: var(--color-primary);
        box-shadow: 0 0 0 0 rgba(23, 162, 184, 0.4);
    }
    50% {
        border-color: var(--color-warning);
        box-shadow: 0 0 0 10px rgba(23, 162, 184, 0);
    }
}
